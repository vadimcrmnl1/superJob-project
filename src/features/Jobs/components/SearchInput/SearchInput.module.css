import { SubmitHandler, useForm } from 'react-hook-form'

import { useAppDispatch } from '../../../../app/store'
import { getJobsTC } from '../../jobs-reducer'
import { setKeywordAC } from '../Filters/actions'

type SearchInputType = {
  keyword: string
}

export const SearchInput = () => {
  const dispatch = useAppDispatch()
  const {
    register,
    handleSubmit,
    formState: { errors },
    reset,
  } = useForm<SearchInputType>()
  const onSubmit: SubmitHandler<SearchInputType> = data => {
    dispatch(setKeywordAC(data.keyword))
    dispatch(getJobsTC())
    reset()
  }

  return (
    <div>
      <form onSubmit={handleSubmit(onSubmit)}>
        <input placeholder={'Найти'} {...register('keyword')} />
        <input type={'submit'} />
      </form>
    </div>
  )
}
